---
title: "Smart buildings"
author: "Cameron Roach"
date: "9 November 2017"
# output:
#   revealjs::revealjs_presentation:
#     theme: white
#     highlight: pygments
#     center: true
#     transition: slide
output:
  ioslides_presentation:
    css: css/styles.css
    logo: fig/BA-LOGO-RGB-Web-LRG.png
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
	echo = TRUE,
	message = FALSE,
	warning = FALSE
)
```

## Overview

* Smart buildings
* Analysing the data
* Building a dashboard

# Smart buildings | Trying to be smart with commercial building data

## What is a BMS?

* Commercial buildings contain Building Management Systems (BMSs).
* Control heating, cooling, ventilation and lighting systems.
* Typically contain a lot of sensors (>100,000)

## Data generated by BMS systems



# Analysing the data | Feature extraction, dimensionality reduction, clustering

## Feature extraction

* Dealing with thousands of unevenly spaced time-series.

## Dimensionality reduction and clustering

* Too many sensors to visualise easily.
* Use dimensionality reduction.

## Which clustering algorithm? {.smaller}

Method | Advantages | Disadvantages 
-------|------------|----------------
K-means | Easy to learn | Outperformed by other algorithms
K-medoids | Better performance than K-means | Can suffer from local minima
Dirichlet process | | 
Affinity propagation | Don't need to specify number of clusters | 
Spectral clustering | Preserves distances between classes well |
Hierarchical clustering | Creates a dendrogram - no "flat" clustering | 



# Building an end product | Prototyping with Dash

## Dash

<div class="columns-2">
* Recently released by Plotly
* Easily build web applications for data analytics
* Python equivalent of R's Shiny

![](fig/dash-logo.svg)
</div>

## Simple example {.smaller}

```{python dash-simple-app, eval=FALSE}
import dash
from dash.dependencies import Input, Output
import dash_core_components as dcc
import dash_html_components as html
import pandas as pd

app = dash.Dash()

app.layout = html.Div([
    dcc.Dropdown(id='my-dropdown',
                 options=['A', 'B', 'C']),
    dcc.Graph(id='my-graph')
])

### <b>
@app.callback(Output('my-graph', 'figure'),
              [Input('my-dropdown', 'value')])
def update_graph(dd_value):
    df = df.query("Variable == @dd_value")
### </b>
    return {'data': [{'x': df.x, 'y': df.y}]}
    
if __name__ == '__main__':
    app.run_server()
```


## Demonstration

# Thank-you for listening! | Any questions?